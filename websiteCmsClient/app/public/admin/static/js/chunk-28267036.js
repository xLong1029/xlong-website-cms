(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28267036"],{"4a06":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"g-content"},[a("div",{staticClass:"m-operation"},[a("Button",{staticClass:"operation-btn",attrs:{type:"primary"},on:{click:function(e){return t.storeModalVisible(!0,"add")}}},[t._v("新增")]),a("Button",{staticClass:"operation-btn",attrs:{type:"warning",disabled:0==t.selectList.length},on:{click:t.deleteData}},[t._v("删除")]),a("Button",{staticClass:"operation-btn",attrs:{disabled:0==t.selectList.length,type:"primary"},on:{click:function(e){return t.enableOrDisable(1)}}},[t._v("启用")]),a("Button",{staticClass:"operation-btn",attrs:{disabled:0==t.selectList.length,type:"warning"},on:{click:function(e){return t.enableOrDisable(-1)}}},[t._v("禁用")])],1),a("EditableTable",{attrs:{title:t.title,data:t.listData},on:{"on-save":t.saveThis,"on-select":t.getSelectRowData,"on-all-select":t.getSelectRowData}}),a("Page",{attrs:{"class-name":"m-page","show-elevator":"","show-sizer":"","show-total":"",total:t.page.dataCount,"page-size":t.page.pageSize,current:t.page.pageNo,"page-size-opts":t.page.pageSizeOpts},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}}),a("div",{staticClass:"clearfix"}),a("Modal",{attrs:{width:600,title:t.storeModel.title},on:{"on-cancel":function(e){return t.storeModalVisible(!1)}},model:{value:t.storeModel.show,callback:function(e){t.$set(t.storeModel,"show",e)},expression:"storeModel.show"}},[a("div",[a("Form",{ref:"modelForm",attrs:{model:t.modelForm,rules:t.modelValidate,"label-width":100}},[a("Form-item",{attrs:{label:"图片标题：",prop:"title"}},[a("Input",{attrs:{placeholder:"请输入图片标题（鼠标移至图片位置时显示）"},model:{value:t.modelForm.title,callback:function(e){t.$set(t.modelForm,"title",e)},expression:"modelForm.title"}})],1),a("Form-item",{attrs:{label:"Banner：",prop:"imgUrl"}},[a("SingleImage",{attrs:{src:t.modelForm.imgUrl,"upload-dir":"img/banner/","size-hint":"1905*680px","file-size":350},on:{"get-img-url":t.setFormBanner}})],1),a("Form-item",{attrs:{label:"跳转链接："}},[a("Input",{attrs:{placeholder:"请输入跳转链接"},model:{value:t.modelForm.linkUrl,callback:function(e){t.$set(t.modelForm,"linkUrl",e)},expression:"modelForm.linkUrl"}})],1),a("Form-item",{attrs:{label:"跳转类型："}},[a("Radio-group",{model:{value:t.modelForm.target,callback:function(e){t.$set(t.modelForm,"target",e)},expression:"modelForm.target"}},[a("Radio",{attrs:{label:1}},[t._v("当前页打开")]),a("Radio",{attrs:{label:2}},[t._v("新页面跳转")])],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:function(e){return t.storeModalVisible(!1)}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.storeData("modelForm")}}},[t._v("确认")])],1)])],1)},n=[],o=(a("4160"),a("159b"),a("a6c3")),r=a("648f"),l=a("ed08"),s=a("975c"),c=a("19aae"),d=a("66fd"),u=a("edcb"),p=a("c6e7"),m={components:{SingleImage:o["a"],EditableTable:r["a"]},mixins:[c["a"],d["a"],p["a"],u["a"]],computed:{apiGetList:function(){var t=this;return function(){return s["a"].GetBannerList({type:1,pageNo:t.page.pageNo,pageSize:t.page.pageSize})}},apiAdd:function(){var t=this;return function(){return s["a"].AddBanner(t.modelForm)}},apiDelete:function(){var t=this;return function(){return s["a"].DelBanner(t.selectList)}},apiEdit:function(){var t=this;return function(){return s["a"].EditBanner(t.modelForm,t.editId)}},apiEnable:function(){var t=this;return function(){return s["a"].SetEnable(1,t.selectList)}},apiDisable:function(){var t=this;return function(){return s["a"].SetEnable(2,t.selectList)}}},data:function(){return{checkAll:!1,title:[{title:"全选",key:"selecAll",align:"center",type:"CheckBox",width:60},{title:"编号",key:"id",align:"center",type:"Text",width:60},{title:"图片标题",key:"title",align:"center",type:"Input"},{title:"Banner图片",key:"imgUrl",align:"center",type:"UploadImg",required:!0,width:250},{title:"跳转链接",key:"linkUrl",align:"center",type:"Input"},{title:"跳转类型",key:"target",align:"center",type:"Text"},{title:"状态",key:"isDisable",align:"center",type:"Text"},{title:"操作",key:"operate",align:"center",type:"Button",button:[{type:"primary",size:"small",minWidth:"64",text:"保存",click:"save"}],width:100}],listData:[],modelForm:{type:1,sectionType:1,target:2},modelValidate:{imgUrl:[{required:!0,validator:function(t,e,a){return a()}}],target:[{required:!0,validator:function(t,e,a){return a()}}]}}},created:function(){this.$store.commit("common/SET_BREADCRUMB",[{name:"Banner管理",path:null},{name:"首页Banner",path:null}]),this.getTableList(),this.initData(this.listData)},methods:{initData:function(t){t.length>0&&t.forEach((function(t){t.isCheck=!1}))},setFormBanner:function(t){this.modelForm.imgUrl=t},storeModalVisible:function(t,e){this.storeModel.show=t,this.storeType=e,"add"==e?(this.storeModel.title="新增内容",this.$refs["modelForm"].resetFields(),this.modelForm={type:1,sectionType:1,target:2}):this.storeModel.title="编辑内容"},saveThis:function(t){var e=t.id,a=t.type,i=t.sectionType,n=t.title,o=t.linkUrl,r=t.target,l=t.imgUrl;l?(this.editId=e,this.modelForm={type:a,sectionType:i,title:n,linkUrl:o,target:r,imgUrl:l},this.editData()):this.$Message.error("提交失败！请上传Banner图片")},getSelectRowData:function(t){var e=this;t.forEach((function(t){return e.selectList.push(t.id)}))},notFoundPic:function(t){Object(l["q"])(t,2)}}},g=m,h=(a("b033"),a("2877")),f=Object(h["a"])(g,i,n,!1,null,"0d0ca4d6",null);e["default"]=f.exports},"713f":function(t,e,a){},b033:function(t,e,a){"use strict";var i=a("713f"),n=a.n(i);n.a},c6e7:function(t,e,a){"use strict";e["a"]={data:function(){return{page:{dataCount:0,hasNextPage:!1,hasPreviousPage:!1,pageCount:0,pageNo:1,pageSize:10,pageSizeOpts:[10,20,30,40]}}},methods:{setPage:function(t){this.page.dataCount=t.count,this.page.pageCount=t.pages},changePage:function(t){this.page.pageNo=t,this.updateList()},changePageSize:function(t){this.page.pageSize=t,this.updateList()}}}},edcb:function(t,e,a){"use strict";e["a"]={data:function(){return{storeType:"add",storeModel:{show:!1,title:""},modelForm:{},editId:0}},methods:{storeModalVisible:function(t,e){this.storeModel.show=t,this.storeType=e,t?this.storeModel.title="add"==e?"新增内容":"编辑内容":this.$refs["modelForm"].resetFields()},storeData:function(t){var e=this;this.$refs[t].validate((function(t){t?(e.pageLoading=!0,"add"==e.storeType?e.addData():e.editData()):e.$Message.error("提交失败！填写有误")}))}}}}}]);