(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-803d9536"],{"157e":function(t,e,n){"use strict";var i=n("ed08");e["a"]={commonBtn:function(t,e,n,i,a,r,s){return t("Button",{props:{type:r||"primary",size:"small"},style:{minWidth:"64px",marginRight:s},on:{click:function(){n[i](e)}}},a)},commonSwitch:function(t,e,n,i,a){return t("div",{on:{click:function(){n[i](e)}}},[t("i-switch",{props:{value:1===e.row[a]}})])},gotoDetail:function(t,e,n,i,a,r){return t("Button",{props:{type:"primary",size:"small"},style:{minWidth:"64px",marginRight:r},on:{click:function(){n.$router.push({name:a,query:{id:e.row.id}})}}},i)},gotoPage:function(t,e,n,i,a,r){return t("Button",{props:{type:"primary",size:"small"},style:{minWidth:"64px",marginRight:r},on:{click:function(){n.$router.push({name:a})}}},i)},popUp:function(t,e,n,i,a){return t("Button",{props:{type:"primary",size:"small"},style:{minWidth:"64px",marginRight:a},on:{click:function(){n.openModel(e.row)}}},i)},showImage:function(t,e,n){return t("img",{attrs:{src:e.row.imgUrl},style:{width:"auto",maxHeight:"120px",maxWidth:"90%",margin:"15px",borderRadius:"4px",border:"1px solid #e4e5e7"},on:{error:function(t){Object(i["q"])(t,2)}}})}}},"19aae":function(t,e,n){"use strict";e["a"]={data:function(){return{}},methods:{getStartDate:function(t){console.log("get start date:"+t),this.queryForm.sTime=t},getEndDate:function(t){console.log("get end date:"+t),this.queryForm.eTime=t},query:function(t,e){var n=this;this.page.pageNo=1,"valid"==e?this.$refs[t].validate((function(t){t?n.getTableList(!0):n.$Message.warning("查询失败！填写有误")})):this.getTableList(!0)},clearQuery:function(){for(var t in this.queryForm)delete this.queryForm[t]},resetQuery:function(t){this.clearQuery(),this.$refs[t].resetFields(),this.page.pageNo=1,this.getTableList()},getTableList:function(t){var e=this;this.pageLoading=!0,this.queryForm&&(this.queryForm.pageNo=this.page.pageNo,this.queryForm.pageSize=this.page.pageSize,t&&""!=this.queryForm.sTime&&""==this.queryForm.eTime&&(this.queryForm.eTime=new Date)),this.apiGetList().then((function(t){e.pageLoading=!1,200==t.code?(e.setListData(t.data),e.page&&e.setPage(t.page)):e.$Message.error("数据获取失败")})).catch((function(t){return console.log(t)}))},setListData:function(t){t.length>0?this.listData=t:this.listData=[]},updateList:function(){this.isQuery?this.getTableList(!0):this.getTableList()}}}},"1c73":function(t,e,n){},"20d3":function(t,e,n){"use strict";var i=n("1c73"),a=n.n(i);a.a},"66fd":function(t,e,n){"use strict";n("c975");e["a"]={data:function(){return{selectList:[]}},methods:{rowClassName:function(t,e){return t.isDisable?"tr-disable":""},setSelectList:function(t,e){this.selectList=[];for(var n=0;n<t.length;n++)console.log(this.selectList,t),this.selectList.indexOf(t[n].id)<0&&this.selectList.push(t[n].id)},clearSelect:function(){this.selectList=[]},addData:function(){var t=this;this.apiAdd().then((function(e){200==e.code?(t.$Message.success("新增成功"),t.updateList(),t.clearSelect(),t.storeModalVisible(!1)):t.$Message.warning(e.msg)})).catch((function(){return t.$Message.error("新增失败")}))},editData:function(){var t=this;this.apiEdit().then((function(e){200==e.code?(t.$Message.success("编辑成功"),t.updateList(),t.clearSelect(),t.storeModalVisible(!1)):t.$Message.warning(e.msg)})).catch((function(){return t.$Message.error("编辑失败")}))},deleteData:function(){var t=this;this.$Modal.confirm({okText:"确认",render:function(t){return t("p",{},"是否确认删除？")},onOk:function(){t.apiDelete().then((function(e){200==e.code?(t.$Message.success("删除成功"),t.page&&t.page.pageNo>1&&t.listData.length<=1&&(t.page.pageNo--,t.page.pageCount--),t.updateList(),t.clearSelect()):t.$Message.warning(e.msg)})).catch((function(){return t.$Message.error("删除失败")}))}})},enableOrDisable:function(t){var e=this;1===t?this.apiEnable().then((function(t){200==t.code?(e.$Message.success("操作成功"),e.updateList(),e.clearSelect()):e.$Message.warning(t.msg)})).catch((function(t){return e.$Message.error("操作失败")})):-1===t&&this.apiDisable().then((function(t){e.pageLoading=!1,200==t.code?(e.$Message.success("操作成功"),e.updateList(),e.clearSelect()):e.$Message.warning(t.msg)})).catch((function(){return e.$Message.error("操作失败")}))}}}},6857:function(t,e,n){},"9a5a":function(t,e,n){"use strict";n("d3b7");var i=n("b775");e["a"]={GetNavList:function(t){return new Promise((function(e,n){i["a"].HttpPost("/api/WebsiteCms/ClientService/Navgation/GetList",t).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))},EditNav:function(t,e){return new Promise((function(n,a){i["a"].HttpPost("/api/WebsiteCms/ClientService/Navgation/EditNav?id=".concat(e),t).then((function(t){return n(t)})).catch((function(t){return a(t)}))}))},AddNav:function(t){return new Promise((function(e,n){i["a"].HttpPost("/api/WebsiteCms/ClientService/Navgation/AddNav",t).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))},DelNav:function(t){return new Promise((function(e,n){i["a"].HttpPost("/api/WebsiteCms/ClientService/Navgation/DelNav",t).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))},SetEnableNav:function(t,e){return new Promise((function(n,a){i["a"].HttpPost("/api/WebsiteCms/ClientService/Navgation/SetEnable?enable=".concat(t),e).then((function(t){return n(t)})).catch((function(t){return a(t)}))}))}}},a33c:function(t,e,n){"use strict";var i=n("6857"),a=n.n(i);a.a},a9e3:function(t,e,n){"use strict";var i=n("83ab"),a=n("da84"),r=n("94ca"),s=n("6eeb"),o=n("5135"),c=n("c6b6"),l=n("7156"),u=n("c04e"),d=n("d039"),p=n("7c73"),f=n("241c").f,g=n("06cf").f,h=n("9bf2").f,m=n("58a8").trim,b="Number",v=a[b],y=v.prototype,L=c(p(y))==b,w=function(t){var e,n,i,a,r,s,o,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=m(l),e=l.charCodeAt(0),43===e||45===e){if(n=l.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:i=2,a=49;break;case 79:case 111:i=8,a=55;break;default:return+l}for(r=l.slice(2),s=r.length,o=0;o<s;o++)if(c=r.charCodeAt(o),c<48||c>a)return NaN;return parseInt(r,i)}return+l};if(r(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var N,M=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof M&&(L?d((function(){y.valueOf.call(n)})):c(n)!=b)?l(new v(w(e)),n,M):w(e)},F=i?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),$=0;F.length>$;$++)o(v,N=F[$])&&!o(M,N)&&h(M,N,g(v,N));M.prototype=y,y.constructor=M,s(a,b,M)}},be51:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-load",attrs:{id:"loading"}},[n("Spin",[n("Icon",{staticClass:"spin-icon-load",attrs:{type:"load-c",size:"18"}}),n("div",[t._v("玩命加载中...")])],1)],1)},a=[],r={name:"loading",data:function(){return{}}},s=r,o=(n("a33c"),n("2877")),c=Object(o["a"])(s,i,a,!1,null,"55727dba",null);e["a"]=c.exports},e2ca:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"g-content"},[n("div",{staticClass:"m-operation"},[n("Button",{staticClass:"operation-btn",attrs:{type:"primary"},on:{click:function(e){return t.storeModalVisible(!0,"add")}}},[t._v("新增")]),n("Button",{staticClass:"operation-btn",attrs:{disabled:0==t.selectList.length,type:"warning"},on:{click:t.deleteData}},[t._v("删除")]),n("Button",{staticClass:"operation-btn",attrs:{disabled:0==t.selectList.length,type:"primary"},on:{click:function(e){return t.enableOrDisable(1)}}},[t._v("启用")]),n("Button",{staticClass:"operation-btn",attrs:{disabled:0==t.selectList.length,type:"warning"},on:{click:function(e){return t.enableOrDisable(-1)}}},[t._v("禁用")]),t.isSecond?n("Button",{staticClass:"operation-btn",attrs:{type:"default"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")]):t._e(),n("div",{staticClass:"clearfix"})],1),t.pageLoading?n("Loading"):n("div",[n("Table",{staticClass:"m-table-list",attrs:{"row-class-name":t.rowClassName,border:"",columns:t.dataList,data:t.listData},on:{"on-selection-change":t.setSelectList}}),n("div",{staticClass:"clearfix"})],1),n("Modal",{attrs:{title:t.storeModel.title},on:{"on-cancel":function(e){return t.storeModalVisible(!1)}},model:{value:t.storeModel.show,callback:function(e){t.$set(t.storeModel,"show",e)},expression:"storeModel.show"}},[n("div",[n("Form",{ref:"modelForm",attrs:{model:t.modelForm,rules:t.validate,"label-width":100}},[n("Form-item",{attrs:{label:"标题：",prop:"name"}},[n("Input",{attrs:{placeholder:"请输入导航名称"},model:{value:t.modelForm.name,callback:function(e){t.$set(t.modelForm,"name",e)},expression:"modelForm.name"}})],1),n("Form-item",{attrs:{label:"链接：",prop:"url"}},[n("Input",{attrs:{placeholder:"请输入链接地址"},model:{value:t.modelForm.url,callback:function(e){t.$set(t.modelForm,"url",e)},expression:"modelForm.url"}})],1),n("Form-item",{attrs:{label:"跳转类型：",prop:"target"}},[n("Radio-group",{model:{value:t.modelForm.target,callback:function(e){t.$set(t.modelForm,"target",e)},expression:"modelForm.target"}},[n("Radio",{attrs:{label:1}},[t._v("当前页打开")]),n("Radio",{attrs:{label:2}},[t._v("新页面跳转")])],1)],1)],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"text"},on:{click:function(e){return t.storeModalVisible(!1)}}},[t._v("取消")]),n("Button",{attrs:{type:"primary"},on:{click:function(e){return t.storeData("modelForm")}}},[t._v("确认")])],1)])],1)},a=[],r=(n("b0c0"),n("a9e3"),n("be51")),s=n("9a5a"),o=n("157e"),c=n("19aae"),l=n("66fd"),u=n("edcb"),d={components:{Loading:r["a"]},mixins:[c["a"],l["a"],u["a"]],props:{isSecond:{type:Boolean,default:!1},parentId:{type:Number,default:0}},computed:{apiGetList:function(){var t=this;return function(){return s["a"].GetNavList({parentId:t.parentId})}},apiDelete:function(){var t=this;return function(){return s["a"].DelNav(t.selectList)}},apiEnable:function(){var t=this;return function(){return s["a"].SetEnableNav(1,t.selectList)}},apiDisable:function(){var t=this;return function(){return s["a"].SetEnableNav(2,t.selectList)}},apiAdd:function(){var t=this;return function(){return s["a"].AddNav(t.modelForm)}},apiEdit:function(){var t=this;return function(){return s["a"].EditNav(t.modelForm,t.editId)}}},data:function(){var t=this;return{pageLoading:!1,website:"",dataList:[{title:"全选",type:"selection",key:"selectAll",align:"center",width:60},{title:"编号",key:"id",align:"center",width:90},{title:"导航名称",key:"name",align:"center"},{title:"链接",key:"url",align:"center",render:function(e,n){return n.row.children.length?e("span",{},n.row.url):e("a",{attrs:{href:t.website+n.row.url,target:"_blank"}},n.row.url)}},{title:"跳转类型",key:"target",align:"center",render:function(t,e){return t("span",{},1==e.row.target?"当前页打开":"新页面跳转")}},{title:"创建时间",key:"createTime",align:"center"},{title:"状态",key:"enabledState",align:"center",render:function(t,e){return t("span",{attrs:{class:e.row.isDisable?"status-fail":"status-success"}},e.row.isDisable?"禁用":"启用")}},{title:"操作",width:180,key:"operation",align:"center",render:function(e,n){return t.isSecond?e("div",[o["a"].popUp(e,n,t,"编辑","10px")]):e("div",[o["a"].popUp(e,n,t,"编辑","10px"),o["a"].gotoDetail(e,n,t,"查看下级","SecondNav")])}}],listData:[],validate:{name:[{required:!0,message:"导航名称不能为空",trigger:"blur"}],url:[{required:!0,message:"链接不能为空",trigger:"blur"}],target:[{required:!0,validator:function(t,e,n){return n()}}]},modelForm:{target:1}}},created:function(){this.init()},methods:{init:function(){var t=!1;t&&(this.website="http://127.0.0.1:6060"),this.updateList()},openModel:function(t){this.storeModalVisible(!0,"edit"),console.log(t),this.editId=t.id,this.modelForm={name:t.name,url:t.url,target:t.target}},getTableList:function(t){var e=this;this.apiGetList(t).then((function(t){e.pageLoading=!1,200==t.code?(e.setListData(t.data),e.page&&e.setPage(t.page)):e.$Message.error("数据获取失败")})).catch((function(t){return console.log(t)}))},addData:function(){var t=this;this.parentId>0&&(this.modelForm.parentId=this.parentId),this.apiAdd().then((function(e){t.pageLoading=!1,200==e.code?(t.$Message.success("新增成功"),t.updateList(),t.clearSelect(),t.storeModalVisible(!1)):t.$Message.warning(e.msg)})).catch((function(){return t.$Message.error("新增失败")}))},updateList:function(){this.getTableList()}}},p=d,f=(n("20d3"),n("2877")),g=Object(f["a"])(p,i,a,!1,null,"176a0b99",null);e["a"]=g.exports},edcb:function(t,e,n){"use strict";e["a"]={data:function(){return{storeType:"add",storeModel:{show:!1,title:""},modelForm:{},editId:0}},methods:{storeModalVisible:function(t,e){this.storeModel.show=t,this.storeType=e,t?this.storeModel.title="add"==e?"新增内容":"编辑内容":this.$refs["modelForm"].resetFields()},storeData:function(t){var e=this;this.$refs[t].validate((function(t){t?(e.pageLoading=!0,"add"==e.storeType?e.addData():e.editData()):e.$Message.error("提交失败！填写有误")}))}}}}}]);