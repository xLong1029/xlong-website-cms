(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16f225d6"],{"549a":function(e,t,a){"use strict";a("b0c0");var i=a("ed08");t["a"]={data:function(){return{format:["image/jpg","image/jpeg","image/png"],uploadStatus:"",showProgress:!1,loading:!1,showModal:!1,showMask:!1,percentage:0,getImageUrl:""}},methods:{viewImage:function(){this.showModal=!0},uploadClick:function(){this.$refs.imgFile.click()},selectFile:function(){var e=this.$refs.imgFile.files;if(e.length>0){var t=e[0].name,a=Math.floor(e[0].size/1024),i=this.fileSize,r=i+"kb";if(a>i)return i>1024&&(r=Math.floor(i/1024)+"M"),this.$Notice.warning({title:"超出文件大小限制",desc:"文件 "+t+" 太大，不能超过 "+r}),this.progressHide(),!1;this.uploadFile(e[0])}else console.log("获取不到文件列表")},progressShow:function(){this.loading=!0,this.uploadStatus="",this.percentage=0,this.showProgress=!0},progressHide:function(){this.loading=!1,this.uploadStatus="finished",this.showProgress=!1},notFoundPic:function(e){Object(i["q"])(e,2)},errorTip:function(e){this.progressHide(),clearInterval(e),this.$Notice.error({title:"图片上传失败，请重试！"})}}}},6857:function(e,t,a){},"7ad9":function(e,t,a){"use strict";var i=a("e3da"),r=a.n(i);r.a},"7f87":function(e,t,a){"use strict";a("d3b7");var i=a("b775");t["a"]={GetUserInfo:function(e){return new Promise((function(t,a){i["a"].HttpGet("/api/WebsiteCms/UserService/Person/GetUserInfo?token=".concat(e)).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))},EditProfile:function(e){return new Promise((function(t,a){i["a"].HttpPost("/api/WebsiteCms/UserService/Person/EditProfile",e).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))},ChangePwd:function(e){return new Promise((function(t,a){i["a"].HttpPost("/api/WebsiteCms/UserService/Person/ChangePwd",e).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))}}},"8f06":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"g-content"},[e.pageLoading?a("Loading"):a("Form",{ref:"infoForm",attrs:{model:e.infoForm,rules:e.validate,"label-width":110}},[a("Row",[a("i-col",{attrs:{span:"10"}},[a("Form-item",{attrs:{label:"账号："}},[a("span",[e._v(e._s(e.infoForm.username))])]),a("Form-item",{attrs:{label:"真实姓名：",prop:"realname"}},[a("Input",{attrs:{placeholder:"请输入您的真实姓名"},model:{value:e.infoForm.realname,callback:function(t){e.$set(e.infoForm,"realname",t)},expression:"infoForm.realname"}})],1),a("Form-item",{attrs:{label:"头像："}},[a("SingleImage",{attrs:{src:e.infoForm.face,"upload-dir":"img/avatar/",preview:!0},on:{"get-img-url":e.setFace}})],1),a("Form-item",{attrs:{label:"电子邮箱：",prop:"email"}},[a("Input",{attrs:{placeholder:"请输入您的邮箱地址"},model:{value:e.infoForm.email,callback:function(t){e.$set(e.infoForm,"email",t)},expression:"infoForm.email"}})],1),a("Form-item",{attrs:{label:"手机号码：",prop:"mobile"}},[a("Input",{attrs:{placeholder:"请输入您的手机号码"},model:{value:e.infoForm.mobile,callback:function(t){e.$set(e.infoForm,"mobile",t)},expression:"infoForm.mobile"}})],1),a("Form-item",[a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.submit("infoForm")}}},[e._v("确认修改")])],1)],1)],1)],1)],1)},r=[],n=a("5530"),o=a("be51"),s=a("a6c3"),l=a("ff51"),c=a("7f87"),u=a("2f62"),d={components:{Loading:o["a"],SingleImage:s["a"]},computed:Object(n["a"])({},Object(u["b"])(["token"])),data:function(){return{pageLoading:!0,infoForm:{username:"",realname:"",face:a("3509"),email:"",mobile:""},validate:{realname:[{required:!0,message:"真实姓名不能为空",trigger:"blur"},{pattern:l["a"].regRealName,message:"真实姓名格式为2-20个字符的中文",trigger:"blur"}],email:[{pattern:l["a"].regEmail,message:"邮箱格式不正确",trigger:"blur"}],mobile:[{pattern:l["a"].regMobile,message:"手机号码格式不正确",trigger:"blur"}]}}},created:function(){this.init()},methods:{init:function(){this.$store.commit("common/SET_BREADCRUMB",[{name:"个人资料",path:null}]),this.getProfile()},submit:function(e){var t=this;this.$refs[e].validate((function(e){e?(t.pageLoading=!0,c["a"].EditProfile(t.infoForm).then((function(e){t.pageLoading=!1,200==e.code?(t.$Message.success("资料修改成功"),t.$store.commit("user/SET_USER_FACE",t.infoForm.face)):t.$Message.warning(e.msg)})).catch((function(){return t.$Message.error("资料修改失败")}))):t.$Message.error("提交失败！填写有误")}))},getProfile:function(){var e=this;c["a"].GetUserInfo(this.token).then((function(t){200==t.code?(e.pageLoading=!1,e.infoForm=t.data):e.$Message.warning(t.msg)})).catch((function(){return e.$Message.error("资料获取失败")}))},setFace:function(e){this.infoForm.face=e}}},f=d,m=a("2877"),g=Object(m["a"])(f,i,r,!1,null,null,null);t["default"]=g.exports},a33c:function(e,t,a){"use strict";var i=a("6857"),r=a.n(i);r.a},a6c3:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"m-Upload",attrs:{id:"singleImage"}},[""!=e.getImageUrl?a("div",{staticClass:"upload-show"},[a("div",{staticClass:"upload-img-wrap"},[a("img",{staticClass:"upload-image",attrs:{src:e.GLOBAL.ShowImg(e.getImageUrl),alt:"图片加载失败"},on:{error:e.notFoundPic}})]),a("div",{staticClass:"upload-mask"},[e.preview?a("Icon",{staticStyle:{"margin-right":"15px"},attrs:{type:"ios-eye"},nativeOn:{click:function(t){return e.viewImage(t)}}}):e._e(),a("Icon",{attrs:{type:"md-create",size:"22"},nativeOn:{click:function(t){return e.uploadClick(t)}}})],1)]):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showUploadBtn,expression:"showUploadBtn"}],staticClass:"upload-btn",on:{click:e.uploadClick}},[a("Icon",{attrs:{type:"md-camera",size:"20"}}),a("input",{ref:"imgFile",attrs:{type:"file",accept:e.format,hidden:""},on:{change:e.selectFile}})],1),"finished"!=e.uploadStatus?[e.showProgress?a("Progress",{staticStyle:{width:"340px"},attrs:{percent:e.percentage,"hide-info":"","stroke-width":3}}):e._e()]:e._e(),a("span",{directives:[{name:"show",rawName:"v-show",value:e.showHint,expression:"showHint"}],staticClass:"hint"},[e._v(" * 图片格式要求：jpg、jpeg、png， "),e.sizeHint?a("span",[e._v("建议尺寸： "+e._s(e.sizeHint)+"，")]):e._e(),e._v(" 文件大小为 "),e.fileSize<1024?a("span",[e._v(e._s(e.fileSize)+"kb")]):a("span",[e._v(e._s(Math.floor(e.fileSize/1024))+"M")]),e._v(" 以内。 ")]),a("div",{staticClass:"clearfix"}),a("Modal",{staticClass:"m-view-img",staticStyle:{"z-index":"9999"},attrs:{title:"查看图片",width:"900"},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[a("img",{attrs:{src:e.GLOBAL.ShowImg(e.getImageUrl)},on:{error:e.notFoundPic}}),a("div",{attrs:{slot:"footer"},slot:"footer"})])],2)},r=[],n=(a("a9e3"),a("549a")),o=a("2934"),s={name:"singleImage",mixins:[n["a"]],props:{src:{type:String,default:""},preview:{type:Boolean,default:!1},showHint:{type:Boolean,default:!0},sizeHint:{type:String,default:"100*100px"},fileSize:{type:Number,default:150},uploadDir:{type:String,default:"img/"},index:{type:Number,default:-1}},data:function(){return{showUploadBtn:!0,getImageUrl:""}},watch:{src:function(e){e?(this.showUploadBtn=!1,this.getImageUrl=e):(this.showUploadBtn=!0,this.getImageUrl="")}},created:function(){this.src&&(this.showUploadBtn=!1,this.getImageUrl=this.src)},methods:{uploadFile:function(e){var t=this;this.progressShow();var a=setInterval((function(){90==t.percentage&&clearInterval(a),t.percentage+=10}),100),i=new FormData;i.append("dir",this.uploadDir),i.append("file",e),o["a"].UploadImg(i).then((function(e){200==e.code?(t.getImageUrl=e.data.url,t.index<0?t.$emit("get-img-url",t.getImageUrl):t.$emit("get-img-url",t.getImageUrl,t.index),t.progressHide(),t.percentage=100,clearInterval(a),t.showUploadBtn=!1,t.$Notice.success({title:"图片上传成功!"})):t.errorTip(a)})).catch((function(){return t.errorTip(a)}))}}},l=s,c=(a("7ad9"),a("2877")),u=Object(c["a"])(l,i,r,!1,null,"2faf36c1",null);t["a"]=u.exports},a9e3:function(e,t,a){"use strict";var i=a("83ab"),r=a("da84"),n=a("94ca"),o=a("6eeb"),s=a("5135"),l=a("c6b6"),c=a("7156"),u=a("c04e"),d=a("d039"),f=a("7c73"),m=a("241c").f,g=a("06cf").f,p=a("9bf2").f,h=a("58a8").trim,v="Number",w=r[v],b=w.prototype,F=l(f(b))==v,I=function(e){var t,a,i,r,n,o,s,l,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=h(c),t=c.charCodeAt(0),43===t||45===t){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+c}for(n=c.slice(2),o=n.length,s=0;s<o;s++)if(l=n.charCodeAt(s),l<48||l>r)return NaN;return parseInt(n,i)}return+c};if(n(v,!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var _,A=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof A&&(F?d((function(){b.valueOf.call(a)})):l(a)!=v)?c(new w(I(t)),a,A):I(t)},E=i?m(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),$=0;E.length>$;$++)s(w,_=E[$])&&!s(A,_)&&p(A,_,g(w,_));A.prototype=b,b.constructor=A,o(r,v,A)}},be51:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-load",attrs:{id:"loading"}},[a("Spin",[a("Icon",{staticClass:"spin-icon-load",attrs:{type:"load-c",size:"18"}}),a("div",[e._v("玩命加载中...")])],1)],1)},r=[],n={name:"loading",data:function(){return{}}},o=n,s=(a("a33c"),a("2877")),l=Object(s["a"])(o,i,r,!1,null,"55727dba",null);t["a"]=l.exports},e3da:function(e,t,a){},ff51:function(e,t,a){"use strict";t["a"]={regUserName:/^(?![a-zA-Z]+$)[a-zA-Z][a-zA-Z0-9]{5,15}$/,regRealName:/^[\u4E00-\u9FA5](([\u4E00-\u9FA5]|·(?!·))){0,18}[\u4E00-\u9FA5]$/,regUscCode:/^[0-9A-ZW]{18}$/,regBankAccount:/^[1-9]\d{7,25}$/,regPostCode:/^[1-9]\d{5}$/,regEmail:/^[\.a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,regCompanyName:/^[\u4E00-\u9FA5a-zA-Z]((?![·\.\(\)（）]{2,4})([\u4E00-\u9FA5a-zA-Z·\.\(\)（）])){0,98}[\u4E00-\u9FA5]$/,regMobile:/^1(3|4|5|7|8)\d{9}$/,regPassword:/^[\w]{6,12}$/,regPhone:/^(1\d{10}$)|(((400)-(\d{3})-(\d{4}))|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{3,7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)$/,regWebsite:/^(http|https):\/\/[\u4E00-\u9FA5A\w\-_]+(\.[\u4E00-\u9FA5A\w\-_]+)+([\u4E00-\u9FA5A\w\-\.,@?^=%&amp;:/~\+#]*[\u4E00-\u9FA5A\w\-\@?^=%&amp;/~\+#])?/}}}]);