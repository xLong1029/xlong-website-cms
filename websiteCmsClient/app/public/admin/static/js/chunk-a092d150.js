(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a092d150"],{"2db5":function(e,t,n){"use strict";var r=n("7603"),o=n.n(r);o.a},7603:function(e,t,n){},a630:function(e,t,n){var r=n("23e7"),o=n("4df4"),i=n("1c7e"),a=!i((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:a},{from:o})},b4b9:function(e,t,n){"use strict";n("a434"),n("ac1f"),n("5319");function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){if(Array.isArray(e))return r(e)}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("e260"),n("d3b7"),n("3ca3"),n("ddb0");function i(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n("fb6a"),n("b0c0"),n("25f0");function a(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e){return o(e)||i(e)||a(e)||c()}var u=n("ed08");t["a"]={data:function(){return{kwModelShow:!1,kwModelForm:{keyword:""}}},methods:{kwModelVisible:function(e){this.kwModelShow=e,e||(this.kwModelForm.keyword="")},removeKeyword:function(e){this.infoForm.metaKeywords.splice(e,1)},addKeywords:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var n=t.kwModelForm.keyword.replace(/\s*/g,"");n=n.replace(/，/g,",");var r=Object(u["v"])(n,",");r=Object(u["b"])(r);var o=t.infoForm.metaKeywords;o.push.apply(o,s(r)),t.infoForm.metaKeywords=Object(u["x"])(o),t.kwModelVisible(!1)}else t.$Message.error("提交失败！填写有误")}))}}}},c155:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"g-content"},[e.pageLoading?n("Loading"):n("div",[n("Form",{ref:"infoForm",attrs:{model:e.infoForm,rules:e.validate,"label-width":125}},[n("Form-item",{attrs:{label:"案例分类：",prop:"categoryId"}},[n("Select",{attrs:{placeholder:"请选择分类"},model:{value:e.infoForm.categoryId,callback:function(t){e.$set(e.infoForm,"categoryId",t)},expression:"infoForm.categoryId"}},e._l(e.cateList,(function(t,r){return n("Option",{key:r,attrs:{value:t.id}},[e._v(e._s(t.categoryName))])})),1)],1),n("Form-item",{attrs:{label:"案例标题：",prop:"title"}},[n("Input",{attrs:{placeholder:"请输入案例标题"},model:{value:e.infoForm.title,callback:function(t){e.$set(e.infoForm,"title",t)},expression:"infoForm.title"}})],1),n("Form-item",{attrs:{label:"案例封面：",prop:"poster"}},[n("ImageCropper",{attrs:{src:e.infoForm.imgUrl,"upload-dir":"img/case/",preview:!0,fixed:!0,fixedNumber:[90,59],autoCropWidth:450,fileSize:300,"size-hint":"450*295px"},on:{"get-img-url":e.setPoster}})],1),n("Form-item",{attrs:{label:"项目完成时间：",prop:"finishedTime"}},[n("DatePicker",{attrs:{type:"date",placeholder:"请选择项目完成时间"},model:{value:e.infoForm.finishedTime,callback:function(t){e.$set(e.infoForm,"finishedTime",t)},expression:"infoForm.finishedTime"}})],1),n("Form-item",{attrs:{label:"负责人：",prop:"projectLeader"}},[n("Input",{attrs:{placeholder:"请输入负责人名称"},model:{value:e.infoForm.projectLeader,callback:function(t){e.$set(e.infoForm,"projectLeader",t)},expression:"infoForm.projectLeader"}})],1),n("Form-item",{attrs:{label:"关键词："}},[e._l(e.infoForm.metaKeywords,(function(t,r){return n("Tag",{key:r,attrs:{name:t,closable:""},on:{"on-close":function(t){return e.removeKeyword(r)}}},[e._v(e._s(t))])})),n("Button",{attrs:{icon:"ios-add",type:"dashed",size:"small"},on:{click:function(t){return e.kwModelVisible(!0)}}},[e._v("添加关键词")])],2),n("Form-item",{attrs:{label:"页面描述："}},[n("Input",{attrs:{type:"textarea",rows:3,maxlength:200,placeholder:"请输入案例描述（不超过200个字符）"},model:{value:e.infoForm.metaDescription,callback:function(t){e.$set(e.infoForm,"metaDescription",t)},expression:"infoForm.metaDescription"}})],1),n("Form-item",{attrs:{label:"案例内容：",prop:"content"}},[n("Tinymce",{attrs:{placeholder:"请输入案例内容",height:"500"},model:{value:e.infoForm.content,callback:function(t){e.$set(e.infoForm,"content",t)},expression:"infoForm.content"}})],1),n("div",{staticClass:"m-operation"},["edit"==e.pageType?n("Button",{staticClass:"fr",attrs:{type:"primary"},on:{click:function(t){return e.submit("infoForm")}}},[e._v("确认修改")]):n("Button",{staticClass:"fr",attrs:{type:"primary"},on:{click:function(t){return e.submit("infoForm")}}},[e._v("确认新增")]),n("Button",{staticClass:"fr",attrs:{type:"default"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")]),n("div",{staticClass:"clearfix"})],1)],1)],1),n("Modal",{attrs:{width:600,title:"添加关键词"},on:{"on-cancel":function(t){return e.kwModelVisible(!1)}},model:{value:e.kwModelShow,callback:function(t){e.kwModelShow=t},expression:"kwModelShow"}},[n("div",[n("Form",{ref:"kwModelForm",attrs:{model:e.kwModelForm,rules:e.validate,"label-width":80}},[n("Form-item",{attrs:{label:"关键词：",prop:"keyword"}},[n("Input",{attrs:{type:"textarea",placeholder:"请输入关键词"},model:{value:e.kwModelForm.keyword,callback:function(t){e.$set(e.kwModelForm,"keyword",t)},expression:"kwModelForm.keyword"}})],1),n("div",{staticClass:"hint"},[e._v('* 输入的关键词请以逗号" , "进行分隔')])],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"text"},on:{click:function(t){return e.kwModelVisible(!1)}}},[e._v("取消")]),n("Button",{attrs:{type:"primary"},on:{click:function(t){return e.addKeywords("kwModelForm")}}},[e._v("确认")])],1)])],1)},o=[],i=n("be51"),a=n("e634"),c=n("557c"),s=n("ed08"),u=n("b4b9"),d=n("d33b"),l={components:{Loading:i["a"],ImageCropper:a["a"],Tinymce:c["a"]},mixins:[u["a"]],data:function(){var e=this;return{pageLoading:!0,pageType:"add",caseId:"",infoForm:{categoryId:"",imgUrl:"",title:"",projectLeader:"",metaKeywords:[],metaDescription:"",content:"",finishedTime:""},validate:{title:[{required:!0,message:"案例标题不能为空",trigger:"blur"}],content:[{required:!0,message:"案例内容不能为空",trigger:"blur"}],poster:[{required:!0,validator:function(e,t,n){return n()}}],keyword:[{required:!0,message:"关键词不能为空",trigger:"blur"}],projectLeader:[{required:!0,message:"负责人不能为空",trigger:"blur"}],categoryId:[{required:!0,validator:function(t,n,r){e.infoForm.categoryId?r():r("请选择案例分类")},trigger:"change"}],finishedTime:[{required:!0,validator:function(t,n,r){e.infoForm.finishedTime?r():r("请选择项目完成时间")},trigger:"change"}]},cateList:[]}},created:function(){this.getCateList();var e=Object(s["l"])("id");e?(this.caseId=e,this.$store.commit("common/SET_BREADCRUMB",[{name:"案例管理",path:null},{name:"案列列表",path:"/admin/CaseManage/List"},{name:"案例详情",path:""}]),this.getDetail(),this.pageType="edit"):(this.pageLoading=!1,this.$store.commit("common/SET_BREADCRUMB",[{name:"案例管理",path:null},{name:"案列列表",path:"/admin/CaseManage/List"},{name:"新增案例",path:""}]))},methods:{submit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){if(""==t.infoForm.imgUrl)return t.$Message.error("请上传案例封面"),!1;t.pageLoading=!0,t.infoForm.metaKeywords=Object(s["c"])(t.infoForm.metaKeywords,","),"add"==t.pageType?d["a"].AddCase(t.infoForm).then((function(e){t.pageLoading=!1,200==e.code?t.$Message.success({content:"新增成功",onClose:function(){t.$router.push({name:"CaseList"})}}):t.$Message.warning(e.msg)})).catch((function(e){return t.$Message.error(e.message)})):d["a"].EditCase(t.infoForm,t.caseId).then((function(e){t.pageLoading=!1,200==e.code?(t.$Message.success("修改成功"),t.getDetail()):t.$Message.warning(e.msg)})).catch((function(e){return console.log(e)}))}else t.$Message.error("提交失败！填写有误")}))},getCateList:function(){var e=this;d["a"].GetCateList(this.caseId).then((function(t){200==t.code?e.cateList=t.data:e.$Message.warning(t.msg)})).catch((function(e){return console.log(e)}))},getDetail:function(){var e=this;d["a"].GetCaseDetail(this.caseId).then((function(t){e.pageLoading=!1,200==t.code?(e.infoForm=t.data,e.infoForm.metaKeywords=t.data.metaKeywords?Object(s["v"])(t.data.metaKeywords,","):[]):e.$Message.warning(t.msg)})).catch((function(e){return console.log(e)}))},setPoster:function(e){this.infoForm.imgUrl=e}}},f=l,m=(n("2db5"),n("2877")),p=Object(m["a"])(f,r,o,!1,null,null,null);t["default"]=p.exports},d33b:function(e,t,n){"use strict";n("d3b7");var r=n("b775");t["a"]={GetServiceList:function(e){return new Promise((function(t,n){r["a"].HttpGet("/api/WebsiteCms/ProductService/ServiceInfo/GetList",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},EditService:function(e,t){return new Promise((function(n,o){r["a"].HttpPost("/api/WebsiteCms/ProductService/ServiceInfo/EditService?id=".concat(t),e).then((function(e){return n(e)})).catch((function(e){return o(e)}))}))},AddService:function(e){return new Promise((function(t,n){r["a"].HttpPost("/api/WebsiteCms/ProductService/ServiceInfo/AddService",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},DelService:function(e){return new Promise((function(t,n){r["a"].HttpPost("/api/WebsiteCms/ProductService/ServiceInfo/DelService",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},SetEnableService:function(e,t){return new Promise((function(n,o){r["a"].HttpPost("/api/WebsiteCms/ProductService/ServiceInfo/SetEnable?enable=".concat(e),t).then((function(e){return n(e)})).catch((function(e){return o(e)}))}))},SetShowIndex:function(e,t){return new Promise((function(n,o){r["a"].HttpPost("/api/WebsiteCms/ProductService/ServiceInfo/SetShowIndex?isHome=".concat(e),t).then((function(e){return n(e)})).catch((function(e){return o(e)}))}))},GetCateList:function(e){return new Promise((function(t,n){r["a"].HttpGet("/api/WebsiteCms/ProductService/Case/GetCateList",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},EditCate:function(e,t){return new Promise((function(n,o){r["a"].HttpPost("/api/WebsiteCms/ProductService/Case/EditCate?id=".concat(t),e).then((function(e){return n(e)})).catch((function(e){return o(e)}))}))},AddCate:function(e){return new Promise((function(t,n){r["a"].HttpPost("/api/WebsiteCms/ProductService/Case/AddCate",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},DelCate:function(e){return new Promise((function(t,n){r["a"].HttpPost("/api/WebsiteCms/ProductService/Case/DelCate",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},SetEnableCate:function(e,t){return new Promise((function(n,o){r["a"].HttpPost("/api/WebsiteCms/ProductService/Case/SetEnableCate?enable=".concat(e),t).then((function(e){return n(e)})).catch((function(e){return o(e)}))}))},GetCaseList:function(e){return new Promise((function(t,n){r["a"].HttpGet("/api/WebsiteCms/ProductService/Case/GetCaseList",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},AddCase:function(e){return new Promise((function(t,n){r["a"].HttpPost("/api/WebsiteCms/ProductService/Case/AddCase",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},DelCase:function(e){return new Promise((function(t,n){r["a"].HttpPost("/api/WebsiteCms/ProductService/Case/DelCase",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},SetEnableCase:function(e,t){return new Promise((function(n,o){r["a"].HttpPost("/api/WebsiteCms/ProductService/Case/SetEnableCase?enable=".concat(e),t).then((function(e){return n(e)})).catch((function(e){return o(e)}))}))},GetCaseDetail:function(e){return new Promise((function(t,n){r["a"].HttpGet("/api/WebsiteCms/ProductService/Case/GetCaseDetail?id=".concat(e)).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},EditCase:function(e,t){return new Promise((function(n,o){r["a"].HttpPost("/api/WebsiteCms/ProductService/Case/EditCase?id=".concat(t),e).then((function(e){return n(e)})).catch((function(e){return o(e)}))}))}}},fb6a:function(e,t,n){"use strict";var r=n("23e7"),o=n("861d"),i=n("e8b5"),a=n("23cb"),c=n("50c4"),s=n("fc6a"),u=n("8418"),d=n("b622"),l=n("1dde"),f=n("ae40"),m=l("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),h=d("species"),g=[].slice,b=Math.max;r({target:"Array",proto:!0,forced:!m||!p},{slice:function(e,t){var n,r,d,l=s(this),f=c(l.length),m=a(e,f),p=a(void 0===t?f:t,f);if(i(l)&&(n=l.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?o(n)&&(n=n[h],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return g.call(l,m,p);for(r=new(void 0===n?Array:n)(b(p-m,0)),d=0;m<p;m++,d++)m in l&&u(r,d,l[m]);return r.length=d,r}})}}]);